(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9165,e=>{"use strict";var t=e.i(47167);let a={Essential:[{category:"Family Support",examples:["Remittly transfer","Family remittance"]},{category:"Groceries",examples:["FreshCo","No Frills","Costco","Metro"]},{category:"Rent",examples:["Monthly rent payment","Apartment rent"]},{category:"Utilities",examples:["Rogers Internet","Hydro One","Fido Mobile"]},{category:"Immigration",examples:["IRCC fee","IELTS exam","Translation service"]},{category:"Health",examples:["Protein powder","Vitamins","GoodLife Fitness"]},{category:"Home",examples:["IKEA furniture","Mop","Mattress"]},{category:"Personal Development",examples:["Udemy course","Technical books","Coursera"]},{category:"Personal Care",examples:["Toothpaste","Body wash","Haircut"]},{category:"Transportation",examples:["Presto card","Gas station","Enterprise rent"]},{category:"Stationary",examples:["Staples","Notebooks","Printer paper"]},{category:"Investment",examples:["RRSP contribution","TFSA","ETF purchase"]},{category:"Liabilities",examples:["Student loan","Mortgage payment","CRA tax"]},{category:"Miscellaneous",examples:["E-transfer","Cash withdraw"]},{category:"Income",examples:["Monthly salary","Tax return","Refund"]}],Luxury:[{category:"Dine out",examples:["McDonald's","Tim Hortons","Swiss Chalet"]},{category:"Travel",examples:["Airbnb","Air Canada","CN Tower tickets"]},{category:"Shopping",examples:["Tommy Hilfiger","Nike","Souvenir keychain"]},{category:"Home+",examples:["Samsung TV","Projector","PlayStation 5"]},{category:"Subscriptions",examples:["Netflix","Spotify Premium","iCloud+"]},{category:"Gifts",examples:["Anniversary gift","Birthday present"]},{category:"Recreational",examples:["Cineplex","Dave & Buster's","Spa day","Concert tickets"]}],Transfers:[{category:"Transfers",examples:["Account transfer","Credit card payment","Network fees"]}]},r=e=>e[Math.floor(Math.random()*e.length)],o=(e=12)=>{let t=new Date,a=new Date(t.getFullYear(),t.getMonth()-e,1),r=new Date;return new Date(a.getTime()+Math.random()*(r.getTime()-a.getTime()))},n=e=>{let[t,a]={"Family Support":[200,1e3],Groceries:[20,150],Rent:[1200,2500],Utilities:[50,200],Immigration:[100,500],Health:[20,100],Home:[50,500],"Personal Development":[20,200],"Personal Care":[10,80],Transportation:[30,150],Stationary:[5,50],Investment:[100,2e3],Liabilities:[200,1500],Miscellaneous:[10,100],Income:[2e3,5e3],"Dine out":[10,80],Travel:[100,1500],Shopping:[30,300],"Home+":[200,1500],Subscriptions:[10,30],Gifts:[50,200],Recreational:[30,200],Transfers:[50,1e3]}[e]||[10,100];return Math.round((t+Math.random()*(a-t))*100)/100},s=(e=3)=>{let t=[],a=new Date;for(let r=0;r<e;r++){let o=new Date(a.getTime()-(e-r)*6048e5),n=new Date(o.getTime()+1e3),s=new Date(n.getTime()+5e3+1e4*Math.random());t.push({id:`demo-job-${r+1}`,filename:`statement-${2024-r}.pdf`,status:"completed",created_at:o.toISOString(),started_at:n.toISOString(),completed_at:s.toISOString(),error_message:null,transaction_count:50+Math.floor(100*Math.random())})}return t},i=(e=200)=>{let t=[],i=[...a.Essential,...a.Luxury,...a.Transfers],l=s();for(let s=0;s<e;s++){let e=r(i),d=Object.entries(a).find(([,t])=>t.some(t=>t.category===e.category))?.[0]||"Essential",c=o(12),g=r(e.examples),m=n(e.category),u="Income"===e.category?m:-m;t.push({id:s+1,job_id:r(l).id,date:c.toISOString(),title:g,amount:u,currency:"CAD",category_primary:d,category_detailed:e.category,category_confidence_level:r(["high","medium","low"]),created_at:c.toISOString()})}return t.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())};async function l(e){return Promise.resolve({job_id:"demo-job-upload",status:"completed",message:"Demo mode: File upload simulated"})}async function d(e){{let t=s();return Promise.resolve(e?t.filter(t=>t.status===e):t)}}async function c(e){return Promise.resolve()}async function g(e,t=100,a=0){{let r=i(300);return e&&(r=r.filter(t=>t.job_id===e)),Promise.resolve(r.slice(a,a+t))}}async function m(e=10,t="detailed"){return Promise.resolve(((e=10,t="detailed")=>i(300).filter(e=>e.amount<0).sort((e,t)=>Math.abs(t.amount)-Math.abs(e.amount)).slice(0,e).map(e=>({id:e.id,date:new Date(e.date).toLocaleDateString("en-CA"),title:e.title,amount:Math.abs(e.amount),category:"primary"===t?e.category_primary:e.category_detailed})))(e,t))}async function u(e=2,t=10,a="detailed"){return Promise.resolve(((e=2,t=10,a="detailed")=>{let r=i(300).filter(e=>e.amount<0),o=new Map,n=new Map;r.forEach(e=>{let t="primary"===a?e.category_primary:e.category_detailed,r=o.get(t)||0,s=n.get(t)||0;o.set(t,r+Math.abs(e.amount)),n.set(t,s+1)}),o.forEach((e,t)=>{let a=n.get(t)||1;o.set(t,e/a)});let s=[];return r.forEach(t=>{let r="primary"===a?t.category_primary:t.category_detailed,n=o.get(r)||0,i=Math.abs(t.amount),l=n>0?(i-n)/n:0;l>=e&&s.push({id:t.id,date:new Date(t.date).toLocaleDateString("en-CA"),title:t.title,amount:i,category:r,average_amount:Math.round(100*n)/100,deviation_percentage:Math.round(100*l)})}),s.sort((e,t)=>t.deviation_percentage-e.deviation_percentage).slice(0,t)})(e,t,a))}async function y(e="detailed",t=5){return Promise.resolve(((e="detailed",t=5)=>{let a=((e="detailed")=>{let t=[],a=new Date,r=i(300);for(let o=0;o<12;o++){let n=a.getFullYear(),s=a.getMonth()-o+1,i=s<=0?n-1:n,l=s<=0?12+s:s,d=new Date(i,l-1,1),c=new Date(i,l,0,23,59,59),g=r.filter(e=>{let t=new Date(e.date);return t>=d&&t<=c&&e.amount<0}),m=new Map;g.forEach(t=>{let a="primary"===e?t.category_primary:t.category_detailed,r=m.get(a)||{total:0,count:0};m.set(a,{total:r.total+Math.abs(t.amount),count:r.count+1})});let u=Array.from(m.entries()).map(([e,t])=>({category:e,total_amount:Math.round(100*t.total)/100,transaction_count:t.count})),y=u.reduce((e,t)=>e+t.total_amount,0);t.push({year:i,month:l,categories:u,total_spending:Math.round(100*y)/100})}return t.reverse()})(e),r=new Map;return a.forEach(e=>{e.categories.forEach(e=>{let t=r.get(e.category)||0;r.set(e.category,t+e.total_amount)})}),Array.from(r.entries()).sort((e,t)=>t[1]-e[1]).slice(0,t).map(([e])=>e).map(e=>({category:e,data:a.map(t=>{let a=t.categories.find(t=>t.category===e);return{month:`${t.year}-${String(t.month).padStart(2,"0")}`,amount:a?a.total_amount:0}})}))})(e,t))}t.default.env.NEXT_PUBLIC_API_URL,e.s(["deleteJob",()=>c,"getCategoryTrends",()=>y,"getJobs",()=>d,"getTopTransactions",()=>m,"getTransactions",()=>g,"getUnusualTransactions",()=>u,"uploadPdf",()=>l],9165)},41644,e=>{"use strict";var t=e.i(43476),a=e.i(40524),r=e.i(2139),o=e.i(83112),n=e.i(75916),s=e.i(22132),i=e.i(9165),l=e.i(12426),d=e.i(35408),c=e.i(25652),g=e.i(52754),m=e.i(71645);function u(){let[e,u]=(0,m.useState)([]),[y,p]=(0,m.useState)([]),[h,x]=(0,m.useState)([]),[f,T]=(0,m.useState)(!0),[b,S]=(0,m.useState)(null),[v,w]=(0,m.useState)("detailed");(0,m.useEffect)(()=>{(async()=>{T(!0);try{let[e,t,a]=await Promise.all([(0,i.getCategoryTrends)(v,5),(0,i.getTopTransactions)(10,v),(0,i.getUnusualTransactions)(2,10,v)]);u(e),p(t),x(a),S(null)}catch(e){S("Failed to fetch spending analysis"),console.error(e)}finally{T(!1)}})()},[v]);let C=y.length>0?y.reduce((e,t)=>e+t.amount,0):0,j=y.length>0?C/y.length:0,M=e.length>0?e.map(e=>({name:e.category,value:e.data.reduce((e,t)=>e+t.amount,0)})):[],_=e.length>0&&e[0].data.length>0?e[0].data.map(t=>{let a={month:t.month};return e.forEach(e=>{let r=e.data.find(e=>e.month===t.month);a[e.category]=r?r.amount:0}),a}):[],D=e.length>0?e.map((e,t)=>{let a=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981"];return{dataKey:e.category,name:e.category,color:a[t%a.length]}}):[];return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Spend Analysis"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"View your spending breakdown by category and trends"})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-slate-800",children:[(0,t.jsx)("label",{htmlFor:"category-type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category Type"}),(0,t.jsxs)("select",{id:"category-type",value:v,onChange:e=>w(e.target.value),className:"mt-1 block w-full max-w-xs rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 dark:border-gray-600 dark:bg-slate-700 dark:text-gray-100 sm:text-sm",children:[(0,t.jsx)("option",{value:"detailed",children:"Detailed Categories"}),(0,t.jsx)("option",{value:"primary",children:"Primary Categories"})]})]}),b&&(0,t.jsx)("div",{className:"rounded-md bg-red-50 p-4 dark:bg-red-900/20",children:(0,t.jsx)("p",{className:"text-sm text-red-800 dark:text-red-400",children:b})}),f&&(0,t.jsx)("div",{className:"rounded-lg bg-white p-8 text-center shadow dark:bg-slate-800",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading analysis..."})}),!f&&!b&&0===e.length&&(0,t.jsx)("div",{className:"rounded-lg bg-white p-8 text-center shadow dark:bg-slate-800",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No spending data available. Upload and process transactions to see analysis."})}),!f&&!b&&e.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(r.StatsCard,{title:"Total Spending",value:`$${C.toFixed(2)}`,icon:l.DollarSign}),(0,t.jsx)(r.StatsCard,{title:"Categories Tracked",value:e.length,icon:g.Wallet}),(0,t.jsx)(r.StatsCard,{title:"Top Transaction",value:y.length>0?`$${y[0].amount.toFixed(2)}`:"$0",icon:c.TrendingUp}),(0,t.jsx)(r.StatsCard,{title:"Avg Transaction",value:`$${j.toFixed(2)}`,icon:d.TrendingDown})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,t.jsx)(a.SpendingPieChart,{data:M,title:"Spending by Category"}),_.length>0&&(0,t.jsx)(n.TrendLineChart,{data:_,lines:D,title:"Category Trends Over Time"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,t.jsx)(o.TopTransactionsTable,{transactions:y}),(0,t.jsx)(s.UnusualTransactionsTable,{transactions:h})]})]})]})}e.s(["default",()=>u])}]);